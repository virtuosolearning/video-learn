<div class="comment-block">
  <div class="comment-heading">
    <div class="comment-info">
      <div class="datetime">
        <a href="#" class="comment-author"><small>By: <%= comment.user.email %></small></a><br>
        <!-- just to note if the comment has been edited-->
        <% if comment.updated_at > comment.created_at  %>
        <small>edited <%= distance_of_time_in_words(comment.updated_at, DateTime.now) %> ago</small>
        <% else %>
          <small><%= distance_of_time_in_words(comment.created_at, DateTime.now) %> ago</small>
        <% end %>
      </div>
    </div>
  </div>
  <div class="comment-body">
    <p>
      <%= comment.deleted_at ? "--- comment deleted at #{comment.deleted_at.strftime("%m/%d/%Y at %I:%M%p")} ---" : comment.body %>
    </p>
    <% unless comment.deleted_at %>
      <div class="comment-actions">
        <a class="show-form">Reply</a>
        <% if current_user == comment.user %>
          |<a class="edit-comment">Edit</a>
          |<%= link_to 'Delete', lesson_comment_path(@lesson, comment, delete_comment: true), method: "patch", :data => { :confirm => "Are you sure you want to delete your comment?" } %>
        <% end %>
      </div>
      <div class="comment-form">
        <%= render partial: 'comments/form', locals: {commentable_object: comment,  edit_comment: nil } %>
        <span class="comment-actions"><a class="hide-form">Cancel</a></span>
      </div>
      <div class="edit-form">
        <%= render partial: 'comments/form', locals: {commentable_object: nil,  edit_comment: comment } %>
        <span class="comment-actions"><a class="hide-form">Cancel</a></span>
      </div>
    <% end %>
  </div>
  <div class="replies">
    <%= render comment.comments %>
  </div>
</div>





